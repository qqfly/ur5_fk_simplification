% simplify_fk_equations
clear;clc

syms a2 a3 d1 d4 d5 d6 pi real;
syms q1 q2 q3 q4 q5 q6 real;

c234 = cos(q2+q3+q4); s234 = sin(q2+q3+q4);
s23 = sin(q2 + q3); c23 = cos(q2 + q3);
s1 = sin(q1); s2 = sin(q2); s3 = sin(q3); s4 = sin(q4); s5 = sin(q5); s6 = sin(q6);
c1 = cos(q1); c2 = cos(q2); c3 = cos(q3); c4 = cos(q4); c5 = cos(q5); c6 = cos(q6);

% original equations
T(1,1) = ((c1*c234-s1*s234)*s5)/2.0 - c5*s1 + ((c1*c234+s1*s234)*s5)/2.0;
T(1,2) = (c6*(s1*s5 + ((c1*c234-s1*s234)*c5)/2.0 + ((c1*c234+s1*s234)*c5)/2.0) - ...
      (s6*((s1*c234+c1*s234) - (s1*c234-c1*s234)))/2.0);
T(1,3) = (-(c6*((s1*c234+c1*s234) - (s1*c234-c1*s234)))/2.0 - ...
      s6*(s1*s5 + ((c1*c234-s1*s234)*c5)/2.0 + ((c1*c234+s1*s234)*c5)/2.0));
T(1,4) = ((d5*(s1*c234-c1*s234))/2.0 - (d5*(s1*c234+c1*s234))/2.0 - ...
      d4*s1 + (d6*(c1*c234-s1*s234)*s5)/2.0 + (d6*(c1*c234+s1*s234)*s5)/2.0 - ...
      a2*c1*c2 - d6*c5*s1 - a3*c1*c2*c3 + a3*c1*s2*s3);
T(2,1) = c1*c5 + ((s1*c234+c1*s234)*s5)/2.0 + ((s1*c234-c1*s234)*s5)/2.0;
T(2,2) = (c6*(((s1*c234+c1*s234)*c5)/2.0 - c1*s5 + ((s1*c234-c1*s234)*c5)/2.0) + ...
      s6*((c1*c234-s1*s234)/2.0 - (c1*c234+s1*s234)/2.0));
T(2,3) = (c6*((c1*c234-s1*s234)/2.0 - (c1*c234+s1*s234)/2.0) - ...
      s6*(((s1*c234+c1*s234)*c5)/2.0 - c1*s5 + ((s1*c234-c1*s234)*c5)/2.0));
T(2,4) = ((d5*(c1*c234-s1*s234))/2.0 - (d5*(c1*c234+s1*s234))/2.0 + d4*c1 + ...
      (d6*(s1*c234+c1*s234)*s5)/2.0 + (d6*(s1*c234-c1*s234)*s5)/2.0 + d6*c1*c5 - ...
      a2*c2*s1 - a3*c2*c3*s1 + a3*s1*s2*s3);
T(3,1) = ((c234*c5-s234*s5)/2.0 - (c234*c5+s234*s5)/2.0);
T(3,2) = ((s234*c6-c234*s6)/2.0 - (s234*c6+c234*s6)/2.0 - s234*c5*c6);
T(3,3) = (s234*c5*s6 - (c234*c6+s234*s6)/2.0 - (c234*c6-s234*s6)/2.0);
T(3,4) = (d1 + (d6*(c234*c5-s234*s5))/2.0 + a3*(s2*c3+c2*s3) + a2*s2 - ...
     (d6*(c234*c5+s234*s5))/2.0 - d5*c234);
T(4,1) = 0;
T(4,2) = 0;
T(4,3) = 0;
T(4,4) = 1;

% simplified equations
T_(1,1) = c234*c1*s5 - c5*s1;
T_(1,2) = c6*(s1*s5 + c234*c1*c5) - s234*c1*s6;
T_(1,3) = -s6*(s1*s5 + c234*c1*c5) - s234*c1*c6;
T_(1,4) = d6*c234*c1*s5 - a3*c23*c1 - a2*c1*c2 - d6*c5*s1 - d5*s234*c1 - d4*s1;
T_(2,1) = c1*c5 + c234*s1*s5;
T_(2,2) = -c6*(c1*s5 - c234*c5*s1) - s234*s1*s6;
T_(2,3) = s6*(c1*s5 - c234*c5*s1) - s234*c6*s1;
T_(2,4) = d6*(c1*c5 + c234*s1*s5) + d4*c1 - a3*c23*s1 - a2*c2*s1 - d5*s234*s1;
T_(3,1) = -s234*s5;
T_(3,2) = -c234*s6 - s234*c5*c6;
T_(3,3) = s234*c5*s6 - c234*c6;
T_(3,4) = d1 + a3*s23 + a2*s2 - d5*c234 - d6*s5*s234;
T_(4,1) = 0;
T_(4,2) = 0;
T_(4,3) = 0;
T_(4,4) = 1;

%%
simplify(T - T_)